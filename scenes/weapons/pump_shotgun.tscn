[gd_scene load_steps=16 format=3 uid="uid://bimc4ufk5hicg"]

[ext_resource type="ArrayMesh" uid="uid://cgahp1theduxt" path="res://models/weapons/pump_shotgun.obj" id="1_ejui6"]
[ext_resource type="Script" path="res://scripts/weapons/weapon_alt_fire.gd" id="2_rkwad"]
[ext_resource type="ArrayMesh" uid="uid://crk83yrjbvbg6" path="res://models/weapons/muzzle_flash.obj" id="3_8b28n"]
[ext_resource type="AnimationLibrary" uid="uid://byhlw1uu73dbf" path="res://scenes/weapons/shotgun_anims.res" id="5_eekxh"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_g6fv8"]
albedo_color = Color(0.501961, 0.501961, 0.501961, 1)
metallic = 1.0
roughness = 0.25
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_823ln"]
shading_mode = 0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gw5kj"]
animation = &"shotgun_anims/shotgun_alt_fire"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_62y18"]
animation = &"shotgun_anims/shotgun_deploy"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_74vc0"]
animation = &"shotgun_anims/shotgun_fire"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hph0p"]
animation = &"shotgun_anims/shotgun_idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_b3vqj"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5ju1q"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e8rcd"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_004om"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_pb0tv"]
states/alt_firing/node = SubResource("AnimationNodeAnimation_gw5kj")
states/alt_firing/position = Vector2(477.667, 11)
states/deploy/node = SubResource("AnimationNodeAnimation_62y18")
states/deploy/position = Vector2(393.667, 100.333)
states/firing/node = SubResource("AnimationNodeAnimation_74vc0")
states/firing/position = Vector2(477.667, 195)
states/idle/node = SubResource("AnimationNodeAnimation_hph0p")
states/idle/position = Vector2(565.667, 95.4445)
transitions = ["Start", "deploy", SubResource("AnimationNodeStateMachineTransition_b3vqj"), "deploy", "idle", SubResource("AnimationNodeStateMachineTransition_5ju1q"), "alt_firing", "idle", SubResource("AnimationNodeStateMachineTransition_e8rcd"), "firing", "idle", SubResource("AnimationNodeStateMachineTransition_004om")]
graph_offset = Vector2(-100, -27)

[node name="Shotgun" type="Node3D"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, -0.15, -0.25, -0.35)

[node name="PumpShotgun" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.00391465, 0)
material_override = SubResource("StandardMaterial3D_g6fv8")
cast_shadow = 0
mesh = ExtResource("1_ejui6")
script = ExtResource("2_rkwad")
alt_bullet = "res://scenes/bullets/grenade.tscn"
alt_shot_cooldown = 1.25
alt_ammo_type = "grenades"
category = 1
bullet = "res://scenes/bullets/hitscan_bullet.tscn"
shot_cooldown = 0.85
volley = 9
spread = 5.0
ammo_type = "shells"

[node name="Spawner" type="Marker3D" parent="PumpShotgun"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.10543e-15, 0.135, 0.65)

[node name="MuzzleFlash" type="MeshInstance3D" parent="PumpShotgun/Spawner"]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, 0, 0, 0.035)
visible = false
cast_shadow = 0
mesh = ExtResource("3_8b28n")
surface_material_override/0 = SubResource("StandardMaterial3D_823ln")

[node name="OmniLight3D" type="OmniLight3D" parent="PumpShotgun/Spawner/MuzzleFlash"]
light_energy = 0.0
shadow_enabled = true
omni_range = 10.0
omni_shadow_mode = 0

[node name="AltSpawner" type="Marker3D" parent="PumpShotgun"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.65)

[node name="MuzzleFlash" type="MeshInstance3D" parent="PumpShotgun/AltSpawner"]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, -8.71226e-10, 0, 0.0250344)
visible = false
cast_shadow = 0
mesh = ExtResource("3_8b28n")
skeleton = NodePath("../../Spawner")
surface_material_override/0 = SubResource("StandardMaterial3D_823ln")

[node name="OmniLight3D" type="OmniLight3D" parent="PumpShotgun/AltSpawner/MuzzleFlash"]
light_energy = 0.0
shadow_enabled = true
omni_range = 10.0
omni_shadow_mode = 0

[node name="AnimationTree" type="AnimationTree" parent="PumpShotgun"]
tree_root = SubResource("AnimationNodeStateMachine_pb0tv")
anim_player = NodePath("../../AnimationPlayer")
active = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"shotgun_anims": ExtResource("5_eekxh")
}

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
max_polyphony = 2
